# План по оптимизации и интернационализации проекта Sahara Guide

Этот документ описывает шаги по улучшению структуры кода, добавлению поддержки английского языка (i18n) и повышению общего качества проекта.

## 1. Интернационализация (i18n) - Добавление английского языка

**Цель:** Сделать гайд доступным для англоязычных пользователей.

**Шаги:**

1.  **Создание файла локализации:**
    *   Создать файл `messages/en.json` рядом с существующим `messages/ru.json` (если он существует).
    *   Структура `en.json` должна повторять структуру `ru.json` (те же ключи).

2.  **Перевод текстов:**
    *   Собрать *все* строки, видимые пользователю, из всех компонентов (включая `GuideContent.tsx`, `ServerPanel.tsx`, `XpCalculator/index.tsx`, `XpCalculator/XpProgressBar.tsx`, `DiscordGuide.tsx`, `Header.tsx` и др.).
    *   Особое внимание уделить **жестко закодированным строкам** внутри компонентов (например, в условных блоках `GuideContent.tsx` для модулей m1, m2, m3, m4 и т.д., заголовки/описания в калькуляторе).
    *   Перевести все собранные строки на английский язык.

3.  **Добавление переводов в `en.json`:**
    *   Заполнить `messages/en.json` переведенными строками, используя соответствующие ключи.
    *   Для жестко закодированных строк создать **новые ключи** (например, `m1_rewards_title` для "Чем выше ваша активность...", `calculator_title` для "Калькулятор discord-поинтов") и добавить их с переводами в *оба* файла (`ru.json` и `en.json`).

4.  **Рефакторинг компонентов:**
    *   Во всех компонентах заменить жестко закодированные строки на вызовы `t('your_key')`, используя хук `useTranslations` из `next-intl`.
    *   Убедиться, что для всех текстов используются ключи из файлов локализации.
    *   Пример: `"Калькулятор discord-поинтов"` заменить на `t('calculator_title')`.

5.  **Реализация переключателя языка (UI):**
    *   Добавить UI-элемент (например, кнопки или выпадающий список) в `Header.tsx` или другое подходящее место.
    *   Этот элемент должен позволять пользователю изменять локаль в URL (например, с `/ru/guide` на `/en/guide`). `next-intl` автоматически подхватит изменение и загрузит нужный файл локализации. (Реализация UI - отдельная задача).

## 2. Оптимизация структуры кода

**Цель:** Улучшить читаемость, поддерживаемость и переиспользуемость кода.

**Шаги:**

1.  **Декомпозиция `GuideContent.tsx`:**
    *   Этот компонент слишком большой из-за условного рендеринга контента для каждого модуля.
    *   **Предложение:** Вынести специфичный JSX-контент каждого модуля (особенно для `m1`, `m2`, `m3`, `m4`, `m5`, `m6`) в отдельные компоненты (например, `components/guide/modules/ModuleM1Content.tsx`, `ModuleM2Content.tsx` и т.д.).
    *   `GuideContent.tsx` будет отвечать только за общую структуру (заголовок, кнопки навигации) и динамическую загрузку/отображение нужного компонента модуля.

2.  **Вынесение данных:**
    *   Массив `modulesContentData` в `GuideContent.tsx` очень большой.
    *   **Предложение:** Переместить его в отдельный файл, например, `data/guideModulesData.ts` или `config/guideContent.ts`, и импортировать в `GuideContent.tsx`.

3.  **Организация файлов:**
    *   Проверить другие компоненты на предмет излишней сложности. Возможно, некоторые части `XpCalculator` или `ServerPanel` можно также разбить на более мелкие компоненты, если это еще не сделано.
    *   Придерживаться консистентной структуры (например, `ComponentName/index.tsx` + `ComponentName/subcomponents`).

4.  **Стилизация:**
    *   Убедиться в консистентном использовании CSS-переменных (`--color-...`) и утилит Tailwind/Shadcn.
    *   Избегать инлайновых стилей там, где можно использовать классы.

## 3. Улучшение качества кода

**Цель:** Повысить надежность и чистоту кода.

**Шаги:**

1.  **Типизация:**
    *   Устранить ошибки типов (например, `implicitly has an 'any' type`), добавляя явные типы параметрам функций (особенно в `.map()`, `.filter()`) и, возможно, возвращаемым значениям.
    *   Проверить использование существующих интерфейсов (`ModuleContentData`, `CalculatorResult` и т.д.).

2.  **Чистка кода:**
    *   Удалить все добавленные для дебага `console.log`.
    *   Убрать закомментированный код, если он больше не нужен.

3.  **Обработка ошибок:**
    *   Пересмотреть обработку ошибок (например, в `useXpCalculator`) на предмет полноты и понятности сообщений для пользователя.

## 4. Оптимизация производительности (Опционально)

**Цель:** Улучшить скорость загрузки и отклика приложения.

**Шаги:**

1.  **Размер бандла:**
    *   Рассмотреть использование динамических импортов (`next/dynamic`) для крупных компонентов, которые не нужны сразу (например, `XpCalculator`, или специфичные компоненты контента модулей после декомпозиции).

2.  **Оптимизация изображений:**
    *   Убедиться, что все изображения (баннеры модулей и т.д.) оптимизированы по размеру и формату.
    *   Использовать компонент `next/image` для автоматической оптимизации и ленивой загрузки.

## Порядок выполнения

Рекомендуется начать с **Интернационализации (Раздел 1)**, так как это потребует значительного рефакторинга компонентов для замены строк на `t()` вызовы. Параллельно или после этого можно заняться **Оптимизацией структуры (Раздел 2)**, особенно декомпозицией `GuideContent.tsx`. **Улучшение качества кода (Раздел 3)** и **Оптимизация производительности (Раздел 4)** можно выполнять итеративно в процессе или после основных структурных изменений. 